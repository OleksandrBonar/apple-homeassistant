- id: Hallway Lighting on when dark outside
  alias: turn_on_hallway_light_when_dark_outside
  trigger:
    - platform: numeric_state
      entity_id: sun.sun
      attribute: elevation
      # Can be a positive or negative number
      below: -4.0
  action:
    - service: light.turn_on
      entity_id:
        - light.hallway

- id: Turn on light in children bedroom
  alias: turn_on_children_bedroom_light
  trigger:
    - platform: state
      entity_id: binary_sensor.children_bedroom_motion
      from: "off"
      to: "on"
  action:
    - service: light.turn_on
      data:
        entity_id: light.children_bedroom
        brightness: 80
    - service: script.turn_on
      entity_id: script.send_message_motion_detected

- id: System startup report
  alias: start_message
  initial_state: true
  trigger:
    - platform: homeassistant
      event: start
  action:
    - service: notify.telegram_user_id_1
      data:
        message: |
          {{ "\U0001F567" }} System startup at {{ states('sensor.time_date') }}

- id: Ondemand report
  alias: send_report
  initial_state: true
  trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/report'
  action:
    - service: script.turn_on
      entity_id: script.system_report

- id: Turn off all lights
  alias: turn_off_all_lights
  initial_state: true
  trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/light/all/off'
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/i/leave'
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/i/sleep'
  action:
    - service: script.turn_on
      entity_id: script.all_lights_off
    - service: notify.telegram_user_id_1
      data:
        message: "All lights are off"

- id: Telegeram start keyboard
  alias: telegram_start_keyboard
  initial_state: true
  trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: "/start"
  action:
    - service: notify.telegram_user_id_1
      data:
        message: "Start message"
        data:
          inline_keyboard:
            - "reports:/report, lights:/light"

- id: Telegeram light keyboard
  alias: telegram_light_keyboard
  initial_state: true
  trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: "/light"
  action:
    - service: notify.telegram_user_id_1
      data:
        message: "All Lights"
        data:
          inline_keyboard:
            - "hallway:/light/hallway, kitchen:/light/kitchen"
            - "children bedroom:/light/children_bedroom, parents bedroom:/light/parents_bedroom"
            - "balcony:/light/balcony"
            - "back:/start"

- id: Telegeram light-kitchen keyboard
  alias: telegram_light_kitchen_keyboard
  initial_state: true
  trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: "/light/kitchen"
  action:
    - service: notify.telegram_user_id_1
      data:
        message: "Kitchen Light is {{ states('light.kitchen') }}"
        data:
          inline_keyboard:
            - "on:/light/kitchen/on, off:/light/kitchen/off"
            - "switch:/light/kitchen/switch, status:/light/kitchen/status"
            - "back:/light"

- id: Telegeram light-kitchen-on keyboard
  alias: telegram_light_kitchen_on_keyboard
  initial_state: true
  trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: "/light/kitchen/on"
  action:
    - service: light.turn_on
      entity_id: light.kitchen

- id: Telegeram light-kitchen-off keyboard
  alias: telegram_light_kitchen_off_keyboard
  initial_state: true
  trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: "/light/kitchen/off"
  action:
    - service: light.turn_off
      entity_id: light.kitchen

- id: Telegeram light-kitchen-switch keyboard
  alias: telegram_light_kitchen_off_keyboard
  initial_state: true
  trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: "/light/kitchen/switch"
  action:
    - service: light.turn_switch
      entity_id: light.kitchen

- id: Telegeram light-kitchen-status keyboard
  alias: telegram_light_kitchen_status_keyboard
  initial_state: true
  trigger:
    - platform: event
      event_type: telegram_callback
      event_data:
        command: "/light/kitchen/status"
  action:
    - service: telegram_bot.answer_callback_query
      data:
        callback_query_id: "{{ trigger.event.data.id }}"
        message: "Kitchen Light is {{ states('light.kitchen') }}"
